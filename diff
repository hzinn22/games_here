<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Games Here</title>

<style>
:root{--bg:#0f172a;--card:#020617;--text:#e5e7eb;--accent:#38bdf8}
.light{--bg:#f1f5f9;--card:#ffffff;--text:#020617;--accent:#0284c7}
*{box-sizing:border-box}
body{margin:0;font-family:Arial;background:var(--bg);color:var(--text)}
header{background:var(--card);padding:15px;text-align:center}
header h1{margin:0;color:var(--accent)}
main{max-width:1200px;margin:auto;padding:15px}
.box{background:var(--card);padding:15px;border-radius:12px;margin-bottom:20px}
input,textarea,select{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #1e293b;background:var(--card);color:var(--text)}
button{padding:8px 14px;border:none;border-radius:8px;background:var(--accent);color:#020617;font-weight:bold;cursor:pointer}
.games{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}
.card{background:var(--card);padding:12px;border-radius:12px}
.card img,.card video{width:100%;border-radius:10px}
.link{color:var(--accent);cursor:pointer}
.comment{border-top:1px solid #1e293b;margin-top:8px;padding-top:6px;font-size:.9rem}
.badge{background:gold;color:#000;padding:3px 6px;border-radius:6px;font-size:.75rem}
#tiktok>div{height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;border-bottom:1px solid #1e293b}
#tiktok video{max-height:70vh}
</style>
</head>

<body>

<header>
<h1>üéÆ Games Here</h1>
</header>

<main>

<div class="box" id="loginBox">
<h2>Login</h2>
<input id="username" placeholder="Usu√°rio">
<input id="password" type="password" placeholder="Senha">
<input type="file" id="avatarInput" accept="image/*">
<button onclick="login()">Entrar</button>
</div>

<div class="box" id="postBox" style="display:none">
<h2>Postar Jogo</h2>
<input id="title" placeholder="Nome do jogo">
<textarea id="description" placeholder="Descri√ß√£o"></textarea>
<select id="genre">
<option>A√ß√£o</option><option>Aventura</option><option>RPG</option>
<option>Corrida</option><option>Terror</option><option>Esporte</option>
</select>
<input type="file" id="image" accept="image/*">
<input type="file" id="video" accept="video/mp4,video/webm">
<label><input type="checkbox" id="featured"> Destaque</label>
<input id="link" placeholder="Link do jogo">
<button onclick="addGame()">Publicar</button>
</div>

<section class="games" id="games"></section>
<section id="tiktok" style="display:none"></section>

</main>

<script>
/* ===== VARI√ÅVEIS ===== */
const gamesEl = document.getElementById('games');
const tiktok = document.getElementById('tiktok');

let users = JSON.parse(localStorage.getItem('users')) || {};
let profiles = JSON.parse(localStorage.getItem('profiles')) || {};
let games = JSON.parse(localStorage.getItem('games')) || [];
let user = localStorage.getItem('user');

/* ===== LOGIN ===== */
function login(){
  const u=username.value.trim();
  const p=password.value;
  if(!u||!p) return alert("Preencha tudo");

  if(!users[u]) users[u]=p;
  if(users[u]!==p) return alert("Senha errada");

  if(avatarInput.files[0]){
    const r=new FileReader();
    r.onload=()=>{profiles[u]=r.result; finishLogin(u)}
    r.readAsDataURL(avatarInput.files[0]);
  } else finishLogin(u);
}

function finishLogin(u){
  localStorage.setItem('user',u);
  user=u;
  loginBox.style.display='none';
  postBox.style.display='block';
  render();
}

if(user){
  loginBox.style.display='none';
  postBox.style.display='block';
}

/* ===== POSTAR ===== */
function addGame(){
  if(!title.value || !description.value)
    return alert("T√≠tulo e descri√ß√£o obrigat√≥rios");

  if(!image.files[0] && !video.files[0])
    return alert("Coloque imagem ou v√≠deo");

  const game={
    id:Date.now(),
    title:title.value,
    description:description.value,
    genre:genre.value,
    image:null,
    video:null,
    link:link.value,
    featured:featured.checked,
    likes:0,
    likedBy:[],
    comments:[],
    author:user
  };

  if(image.files[0]){
    const r=new FileReader();
    r.onload=()=>{game.image=r.result; finishGame(game)}
    r.readAsDataURL(image.files[0]);
  } else if(video.files[0]){
    const r=new FileReader();
    r.onload=()=>{game.video=r.result; finishGame(game)}
    r.readAsDataURL(video.files[0]);
  }
}

function finishGame(game){
  games.unshift(game);
  save();
  render();
}

/* ===== INTERA√á√ïES ===== */
function likeGame(id){
  const g=games.find(x=>x.id===id);
  if(g.likedBy.includes(user)) return;
  g.likedBy.push(user);
  g.likes++;
  save();
  render();
}

function addComment(id,text){
  if(!text) return;
  const g=games.find(x=>x.id===id);
  g.comments.push(user+": "+text);
  save();
  render();
}

/* ===== RENDER ===== */
function render(){
  gamesEl.innerHTML='';
  games.forEach(g=>{
    const d=document.createElement('div');
    d.className='card';
    d.innerHTML=`
      ${g.featured?'<span class="badge">üèÜ Destaque</span>':''}
      ${g.video?`<video src="${g.video}" controls></video>`:
        g.image?`<img src="${g.image}">`:`<p>Sem m√≠dia</p>`}
      <h3>${g.title}</h3>
      <p>${g.description}</p>
      <p>Autor: ${g.author}</p>
      <a href="${g.link}" target="_blank">Jogar</a>
      <div>‚ù§Ô∏è ${g.likes} <button onclick="likeGame(${g.id})">Curtir</button></div>
      <input placeholder="Comentar" onkeydown="if(event.key==='Enter')addComment(${g.id},this.value)">
      ${g.comments.map(c=>`<div class="comment">${c}</div>`).join('')}
    `;
    gamesEl.appendChild(d);
  });
}

function save(){
  localStorage.setItem('users',JSON.stringify(users));
  localStorage.setItem('profiles',JSON.stringify(profiles));
  localStorage.setItem('games',JSON.stringify(games));
}

render();
</script>

</body>
</html>
